{"version":3,"sources":["actions/types.js","configs/constants.js","utils/phone-formatter.js","utils/email-formatter.js","configs/header-accessors.js","configs/papaparse.config.js","parser/csv.js","utils/add-id.js","utils/add-duplication-field.js","utils/csv-required-fields-validator.js","utils/convert-yearly-income.js","utils/convert-has-children.js","utils/convert-license-states.js","components/UploadFile/UploadFile.js","components/UploadFile/index.js","actions/dataActions.js","configs/columns.js","utils/validator.js","components/Table/Table.js","components/Table/index.js","components/Warning/Warning.js","components/Warning/index.js","components/App/App.js","components/App/index.js","reportWebVitals.js","reducers/dataReducer.js","reducers/validationReducer.js","reducers/index.js","store.js","index.js"],"names":["PARSE_FILE","VALID_STRUCTURE","DATE_FORMATS","PHONE_FORMATS","LICENSE_NUMBER_FORMATS","WARNING_MESSAGE","INVALID_CELL","phoneFormatter","phoneNumber","some","reg","test","phone","emailFormatter","str","_","toLower","PHONE","EMAIL","YEARLY_INCOME","HAS_CHILDREN","LICENSE_STATES","options","header","worker","skipEmptyLines","transformHeader","value","camelCase","toLowerCase","comments","transform","trim","dynamicTyping","csv","file","Promise","complete","error","Papa","parse","addId","data","map","obj","idx","id","addDuplicationField","arr","email","targetIdx","findIndex","item","duplicateWith","schema","properties","fullName","type","required","csvRequiredFieldValidator","resolve","reject","validate","Ajv","compile","every","convertYearlyIncomeToDecimal","Number","isNaN","parseFloat","toFixed","convertHasChildren","hasChildren","String","convertLicenseStates","states","split","state","statesJSON","find","name","abbreviation","undefined","join","UploadFile","dispatch","useDispatch","Container","fluid","className","fileTypes","multiplyFiles","handleFiles","files","pop","Blob","then","requiredFieldValidator","valid","convertYearlyIncome","payload","catch","err","console","parseFile","Button","columns","Header","accessor","validator","row","length","isPhoneValid","emailValidator","isEmailValid","checkAge","age","isInteger","ageNumber","isAgeValid","checkExperience","number","currentAge","ageType","ageValue","experienceNumber","isExperienceValid","checkYearlyIncome","income","yearlyIncomeNumber","isYearlyIncomeValid","moment","isValid","diff","isExpirationDateValid","isHasChildrenValid","checkLicenseNumber","isLicenseNumberValid","isLicenseStateValid","Table","useSelector","useTable","getTableProps","headerGroups","rows","prepareRow","striped","bordered","hover","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","i","getRowProps","cells","cell","original","cellProps","getCellProps","hasOwnProperty","Warning","Alert","variant","Heading","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","dataReducer","action","validationReducer","rootReducer","combineReducers","middleware","thunk","store","createStore","applyMiddleware","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.827f8230.chunk.js","sourcesContent":["export const PARSE_FILE = 'PARSE_FILE';\r\nexport const VALID_STRUCTURE = 'VALID_STRUCTURE';\r\nexport const ADD_FILE_NAME = 'ADD_FILE_NAME';\r\n","export const MIN_AGE = 21;\r\nexport const MAX_AGE = 150;\r\nexport const MIN_YEARLY_INCOME = 0;\r\nexport const MAX_YEARLY_INCOME = 1000000;\r\nexport const DATE_FORMATS = ['YYYY-MM-DD', 'MM/DD/YYYY'];\r\nexport const PHONE_FORMATS = [/^\\+1\\d{10}$/, /^1\\d{10}$/, /^\\d{10}$/];\r\nexport const LICENSE_NUMBER_FORMATS = [/^[a-zA-Z0-9]{6}$/];\r\nexport const WARNING_MESSAGE = 'File format is not correct';\r\nexport const WARNING_ALERT_VARIANT = 'danger';\r\nexport const INVALID_CELL = 'table-danger';\r\n","import phone from 'phone';\r\nimport { PHONE_FORMATS } from '../configs/constants';\r\n\r\n// TODO: ask client about conditions\r\nconst phoneFormatter = (phoneNumber) => {\r\n  const isValid = PHONE_FORMATS.some((reg) => reg.test(phoneNumber));\r\n  if (isValid) {\r\n    return phone(phoneNumber)[0];\r\n  }\r\n  return phoneNumber;\r\n};\r\n\r\nexport default phoneFormatter;\r\n","import _ from 'lodash';\r\n\r\nconst emailFormatter = (str) => _.toLower(str);\r\n\r\nexport default emailFormatter;\r\n","export const ID = 'id';\r\nexport const FULL_NAME = 'fullName';\r\nexport const PHONE = 'phone';\r\nexport const EMAIL = 'email';\r\nexport const AGE = 'age';\r\nexport const EXPERIENCE = 'experience';\r\nexport const YEARLY_INCOME = 'yearlyIncome';\r\nexport const HAS_CHILDREN = 'hasChildren';\r\nexport const LICENSE_STATES = 'licenseStates';\r\nexport const EXPIRATION_DATE = 'expirationDate';\r\nexport const LICENSE_NUMBER = 'licenseNumber';\r\nexport const DUPLICATE_WITH = 'duplicateWith';\r\n","import _ from 'lodash';\r\nimport phoneFormatter from '../utils/phone-formatter';\r\nimport emailFormatter from '../utils/email-formatter';\r\nimport { PHONE, EMAIL } from './header-accessors';\r\n\r\n// TODO: Check prevalidation in tables\r\n// https://stackoverflow.com/questions/56219293/display-boolean-and-timestamp-values-inside-react-table-react-table-reacttyp#answer-58363447\r\nconst dataNormalize = (value, header) => {\r\n  if (typeof value === 'number') {\r\n    return value;\r\n  }\r\n\r\n  let str = _.trim(value, `'\" `);\r\n\r\n  switch (header) {\r\n    case PHONE:\r\n      return phoneFormatter(str);\r\n    case EMAIL:\r\n      return emailFormatter(str);\r\n    default:\r\n      return str;\r\n  }\r\n};\r\n\r\nconst headerNormalize = (value) => _.camelCase(value.toLowerCase());\r\n\r\nconst options = {\r\n  header: true,\r\n  worker: false, // when true there is a problem with next parsing\r\n  skipEmptyLines: true,\r\n  transformHeader: headerNormalize,\r\n  comments: true,\r\n  transform: dataNormalize,\r\n  dynamicTyping: true, // can be a problem with display data\r\n};\r\n\r\nexport default options;\r\n","import Papa from 'papaparse';\r\nimport options from '../configs/papaparse.config';\r\n\r\nconst csv = (file) => {\r\n  return new Promise((complete, error) => {\r\n    Papa.parse(file, { ...options, complete, error });\r\n  });\r\n};\r\n\r\nexport default csv;\r\n","const addId = (data) => {\r\n  return data.map((obj, idx) => ({ id: idx + 1, ...obj }));\r\n};\r\n\r\nexport default addId;\r\n","const addDuplicationField = (arr) => {\r\n  return arr.map((obj) => {\r\n    const { id, phone, email } = obj;\r\n    let targetIdx = arr.findIndex((item) => {\r\n      return (item.phone === phone || item.email === email) && item.id !== id;\r\n    });\r\n    const duplicateWith = targetIdx === -1 ? '' : arr[targetIdx].id;\r\n    return { ...obj, duplicateWith };\r\n  });\r\n};\r\n\r\nexport default addDuplicationField;\r\n","import Ajv from 'ajv';\r\nimport { FULL_NAME, PHONE, EMAIL } from '../configs/header-accessors';\r\nimport { WARNING_MESSAGE } from '../configs/constants';\r\n\r\nconst schema = {\r\n  properties: {\r\n    fullName: { type: 'string' },\r\n    phone: { type: ['string', 'integer'] },\r\n    email: { type: 'string' },\r\n  },\r\n  required: [FULL_NAME, PHONE, EMAIL],\r\n};\r\n\r\nconst csvRequiredFieldValidator = (data) => {\r\n  return new Promise((resolve, reject) => {\r\n    const ajv = new Ajv();\r\n    const validate = ajv.compile(schema);\r\n    const valid = data.every((obj) => validate(obj));\r\n    if (valid) {\r\n      resolve(data);\r\n    }\r\n    reject(WARNING_MESSAGE);\r\n  });\r\n};\r\n\r\nexport default csvRequiredFieldValidator;\r\n","import { YEARLY_INCOME } from '../configs/header-accessors';\r\n\r\nconst convertYearlyIncomeToDecimal = (data) => {\r\n  return data.map((obj) => {\r\n    const value = obj[YEARLY_INCOME];\r\n    if (typeof value === 'number' && !Number.isNaN(value)) {\r\n      return {\r\n        ...obj,\r\n        [YEARLY_INCOME]: Number.parseFloat(value).toFixed(2),\r\n      };\r\n    }\r\n    return obj;\r\n  });\r\n};\r\n\r\nexport default convertYearlyIncomeToDecimal;\r\n","import { HAS_CHILDREN } from '../configs/header-accessors';\r\n\r\nconst convertHasChildren = (data) => {\r\n  return data.map((obj) => {\r\n    const hasChildren =\r\n      obj[HAS_CHILDREN] != null ? String(obj[HAS_CHILDREN]) : 'false'; // if hasChildren is null(before was empty) then 'false'\r\n    return { ...obj, [HAS_CHILDREN]: hasChildren };\r\n  });\r\n};\r\n\r\nexport default convertHasChildren;\r\n","import statesJSON from '../configs/states_titlecase.json';\r\nimport { LICENSE_STATES } from '../configs/header-accessors';\r\n\r\nconst convertLicenseStates = (data) => {\r\n  return data.map((obj) => {\r\n    const currentDataStates = obj[LICENSE_STATES].split(/\\s*\\|\\s*/);\r\n    const currentDataStatesAbbreviationArr = currentDataStates.map((str) => {\r\n      const state = statesJSON.find(({ name, abbreviation }) => {\r\n        return (\r\n          name.toLowerCase() === str.toLowerCase() ||\r\n          abbreviation.toLowerCase() === str.toLowerCase()\r\n        );\r\n      });\r\n      if (state !== undefined) {\r\n        return state.abbreviation;\r\n      }\r\n      return str; // If there is no such state in list return original value\r\n    });\r\n    const states = currentDataStatesAbbreviationArr.join(' | ');\r\n    return { ...obj, [LICENSE_STATES]: states };\r\n  });\r\n};\r\n\r\nexport default convertLicenseStates;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport ReactFileReader from 'react-file-reader';\r\nimport { parseFile } from '../../actions/dataActions';\r\nimport { Button } from 'react-bootstrap';\r\nimport Container from 'react-bootstrap/Container';\r\n\r\nfunction UploadFile() {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleFiles = (files) => {\r\n    const [file] = files;\r\n    const { name } = file;\r\n    if (name.split('.').pop() === 'csv') {\r\n      dispatch(parseFile(file));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container fluid className=\"text-right mt-4 mb-4\">\r\n      <ReactFileReader\r\n        fileTypes={['.csv']}\r\n        multiplyFiles={false}\r\n        handleFiles={handleFiles}\r\n      >\r\n        <Button>Import users</Button>\r\n      </ReactFileReader>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default UploadFile;\r\n","import UploadFile from './UploadFile';\r\nexport default UploadFile;\r\n","import { PARSE_FILE, VALID_STRUCTURE } from './types';\r\nimport { WARNING_MESSAGE } from '../configs/constants';\r\nimport csv from '../parser/csv';\r\nimport addId from '../utils/add-id';\r\nimport addDuplicationField from '../utils/add-duplication-field';\r\nimport requiredFieldValidator from '../utils/csv-required-fields-validator';\r\nimport convertYearlyIncome from '../utils/convert-yearly-income';\r\nimport convertHasChildren from '../utils/convert-has-children';\r\nimport convertLicenseStates from '../utils/convert-license-states';\r\n\r\n// TODO: convert all boolean to string\r\n// TODO: ask the client about a range of input formats\r\nexport const parseFile = (file) => (dispatch) => {\r\n  if (file instanceof Blob) {\r\n    csv(file)\r\n      .then(({ data }) => requiredFieldValidator(data)) // Validation of required fields - fullName, phone, email\r\n      .then((data) => { // if everything ok then data structure is valid\r\n        dispatch({\r\n          type: VALID_STRUCTURE,\r\n          valid: true,\r\n        });\r\n        return data;\r\n      })\r\n      .then(addId) // Add id\r\n      .then(addDuplicationField) // Add duplicate with\r\n      .then(convertYearlyIncome) // Convert yearly income to decimal\r\n      .then(convertHasChildren) // Convert empty string to 'false'\r\n      .then(convertLicenseStates) // Convert states to abbreviations\r\n      .then((data) => {\r\n        dispatch({\r\n          type: PARSE_FILE,\r\n          payload: data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n        if (err === WARNING_MESSAGE) {\r\n          dispatch({\r\n            type: VALID_STRUCTURE,\r\n            valid: false,\r\n          });\r\n        }\r\n      });\r\n  }\r\n};\r\n","const columns = [\r\n  {\r\n    Header: 'ID',\r\n    accessor: 'id',\r\n  },\r\n  {\r\n    Header: 'Full Name',\r\n    accessor: 'fullName',\r\n  },\r\n  {\r\n    Header: 'Phone',\r\n    accessor: 'phone',\r\n  },\r\n  {\r\n    Header: 'Email',\r\n    accessor: 'email',\r\n  },\r\n  {\r\n    Header: 'Age',\r\n    accessor: 'age',\r\n  },\r\n  {\r\n    Header: 'Experience',\r\n    accessor: 'experience',\r\n  },\r\n  {\r\n    Header: 'Yearly Income',\r\n    accessor: 'yearlyIncome',\r\n  },\r\n  {\r\n    Header: 'Has children',\r\n    accessor: 'hasChildren',\r\n  },\r\n  {\r\n    Header: 'License states',\r\n    accessor: 'licenseStates',\r\n  },\r\n  {\r\n    Header: 'Expiration date',\r\n    accessor: 'expirationDate',\r\n  },\r\n  {\r\n    Header: 'License number',\r\n    accessor: 'licenseNumber',\r\n  },\r\n  {\r\n    Header: 'Duplicate with',\r\n    accessor: 'duplicateWith',\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import {\r\n  AGE,\r\n  EMAIL,\r\n  EXPERIENCE,\r\n  EXPIRATION_DATE,\r\n  HAS_CHILDREN,\r\n  LICENSE_NUMBER,\r\n  LICENSE_STATES,\r\n  PHONE,\r\n  YEARLY_INCOME,\r\n} from '../configs/header-accessors';\r\nimport { validate as emailValidator } from 'email-validator';\r\nimport {\r\n  DATE_FORMATS,\r\n  MAX_AGE,\r\n  MIN_YEARLY_INCOME,\r\n  MAX_YEARLY_INCOME,\r\n  MIN_AGE,\r\n  PHONE_FORMATS,\r\n  LICENSE_NUMBER_FORMATS,\r\n} from '../configs/constants';\r\nimport moment from 'moment';\r\nimport statesJSON from '../configs/states_titlecase.json';\r\n\r\nexport const isFullNameValid = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const isPhoneValid = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return false;\r\n  }\r\n  return PHONE_FORMATS.some((reg) => reg.test(value));\r\n};\r\n\r\nexport const isEmailValid = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return false;\r\n  }\r\n  return emailValidator(value);\r\n};\r\n\r\n// TODO: Ask the client about max age limit\r\nexport const isAgeValid = (value) => {\r\n  const checkAge = (age) => {\r\n    return Number.isInteger(age) && age >= MIN_AGE && age <= MAX_AGE;\r\n  };\r\n  switch (typeof value) {\r\n    case 'number':\r\n      return checkAge(value);\r\n    case 'string':\r\n      const ageNumber = Number(value);\r\n      if (isNaN(ageNumber)) {\r\n        return false;\r\n      }\r\n      return checkAge(ageNumber);\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\n// TODO: Ask a client about type of number (int or float)\r\nexport const isExperienceValid = (value, age = MIN_AGE) => {\r\n  const checkExperience = (number, currentAge) => {\r\n    return number >= 0 && number <= currentAge - MIN_AGE;\r\n  };\r\n  const ageType = typeof age;\r\n  const ageValue =\r\n    ageType === 'number' ? age : ageType === 'string' ? Number(age) : 0;\r\n  switch (typeof value) {\r\n    case 'number':\r\n      return checkExperience(value, ageValue);\r\n    case 'string':\r\n      const experienceNumber = Number(value);\r\n      if (isNaN(experienceNumber)) {\r\n        return false;\r\n      }\r\n      return checkExperience(experienceNumber, ageValue);\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\nexport const isYearlyIncomeValid = (value) => {\r\n  const checkYearlyIncome = (income) => {\r\n    return income >= MIN_YEARLY_INCOME && income <= MAX_YEARLY_INCOME;\r\n  };\r\n  switch (typeof value) {\r\n    case 'number':\r\n      return checkYearlyIncome(value);\r\n    case 'string':\r\n      const yearlyIncomeNumber = Number(value);\r\n      if (isNaN(yearlyIncomeNumber)) {\r\n        return false;\r\n      }\r\n      return checkYearlyIncome(yearlyIncomeNumber);\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\nexport const isExpirationDateValid = (value) => {\r\n  if (typeof value !== 'string') {\r\n    return false;\r\n  }\r\n  const isValidFormat = moment(value, DATE_FORMATS, true).isValid();\r\n  if (isValidFormat) {\r\n    return moment().diff(value) <= 0;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const isHasChildrenValid = (value) => {\r\n  if (typeof value !== 'string') {\r\n    return false;\r\n  }\r\n  return value === 'true' || value === 'false';\r\n};\r\n\r\nexport const isLicenseNumberValid = (value) => {\r\n  const checkLicenseNumber = (str) => {\r\n    return LICENSE_NUMBER_FORMATS.some((reg) => reg.test(str));\r\n  };\r\n  switch (typeof value) {\r\n    case 'string':\r\n      return checkLicenseNumber(value);\r\n    case 'number':\r\n      return checkLicenseNumber(String(value));\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\nexport const isLicenseStateValid = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return false;\r\n  }\r\n  const currentStates = value.split(/\\s*\\|\\s*/);\r\n  return currentStates.every((str) => {\r\n    return statesJSON.some(({ name, abbreviation }) => {\r\n      return (\r\n        name.toLowerCase() === str.toLowerCase() ||\r\n        abbreviation.toLowerCase() === str.toLowerCase()\r\n      );\r\n    });\r\n  });\r\n};\r\n\r\n// TODO: Add exception for not important columns\r\nconst validator = (value, header, row) => {\r\n  switch (header) {\r\n    case PHONE:\r\n      return isPhoneValid(value);\r\n    case EMAIL:\r\n      return isEmailValid(value);\r\n    case AGE:\r\n      return isAgeValid(value);\r\n    case EXPERIENCE:\r\n      return isExperienceValid(value, row.age);\r\n    case YEARLY_INCOME:\r\n      return isYearlyIncomeValid(value);\r\n    case EXPIRATION_DATE:\r\n      return isExpirationDateValid(value);\r\n    case HAS_CHILDREN:\r\n      return isHasChildrenValid(value);\r\n    case LICENSE_NUMBER:\r\n      return isLicenseNumberValid(value);\r\n    case LICENSE_STATES:\r\n      return isLicenseStateValid(value);\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\nexport default validator;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTable } from 'react-table';\r\nimport { INVALID_CELL } from '../../configs/constants';\r\nimport columns from '../../configs/columns';\r\nimport validator from '../../utils/validator';\r\nimport BTable from 'react-bootstrap/Table';\r\n\r\nfunction Table() {\r\n  // TODO: useMemo to not recalculate on every single render\r\n\r\n  const data = useSelector((state) => state.data);\r\n\r\n  // Use the state and functions returned from useTable to build your UI\r\n  const { getTableProps, headerGroups, rows, prepareRow } = useTable({\r\n    columns,\r\n    data,\r\n  });\r\n\r\n  return (\r\n    <BTable striped bordered hover {...getTableProps()}>\r\n      <thead>\r\n        {headerGroups.map((headerGroup) => (\r\n          <tr {...headerGroup.getHeaderGroupProps()}>\r\n            {headerGroup.headers.map((column) => (\r\n              <th {...column.getHeaderProps()}>{column.render('Header')}</th>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </thead>\r\n      <tbody>\r\n        {rows.map((row, i) => {\r\n          prepareRow(row);\r\n          return (\r\n            <tr {...row.getRowProps()}>\r\n              {row.cells.map((cell) => {\r\n                const { id: header } = cell.column;\r\n                const { value } = cell;\r\n                let isValid = validator(value, header, cell.row.original);\r\n\r\n                // TODO: find more safer way to add class\r\n                // Add class if data is invalid\r\n                const cellProps = { ...cell.getCellProps() };\r\n                if (!isValid) {\r\n                  if (cellProps.hasOwnProperty('className')) {\r\n                    cellProps.className = `${cellProps.className} ${INVALID_CELL}`;\r\n                  } else {\r\n                    cellProps.className = INVALID_CELL;\r\n                  }\r\n                }\r\n                return <td {...cellProps}>{cell.render('Cell')}</td>;\r\n              })}\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </BTable>\r\n  );\r\n}\r\n\r\nexport default Table;\r\n","import Table from './Table';\r\nexport default Table;\r\n","import React from 'react';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport {\r\n  WARNING_MESSAGE,\r\n  WARNING_ALERT_VARIANT,\r\n} from '../../configs/constants';\r\n\r\nfunction Warning() {\r\n  return (\r\n    <Alert variant={WARNING_ALERT_VARIANT} className=\"mt-4 mb-4\">\r\n      <Alert.Heading className=\"text-center mt-4 mb-4\">\r\n        {WARNING_MESSAGE || 'Oops, something went wrong'}\r\n      </Alert.Heading>\r\n    </Alert>\r\n  );\r\n}\r\n\r\nexport default Warning;\r\n","import Warning from './Warning';\r\nexport default Warning;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport UploadFile from '../UploadFile';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Table from '../Table';\r\nimport Warning from '../Warning';\r\nimport Container from 'react-bootstrap/Container';\r\n\r\nfunction App() {\r\n  const valid = useSelector((state) => state.valid);\r\n  return (\r\n    <Container fluid>\r\n      <UploadFile />\r\n      {valid ? <Table /> : <Warning />}\r\n      {valid && <UploadFile />}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import App from './App';\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { PARSE_FILE } from '../actions/types';\r\n\r\nconst initialState = [];\r\n\r\nconst dataReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case PARSE_FILE:\r\n      return [...action.payload];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default dataReducer;\r\n","import { VALID_STRUCTURE } from '../actions/types';\r\n\r\nconst initialState = false;\r\n\r\nconst validationReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case VALID_STRUCTURE:\r\n      return action.valid;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default validationReducer;\r\n","import { combineReducers } from 'redux';\r\nimport dataReducer from './dataReducer';\r\nimport validationReducer from './validationReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  data: dataReducer,\r\n  valid: validationReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  applyMiddleware(...middleware)\r\n);\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}