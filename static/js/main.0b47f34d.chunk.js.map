{"version":3,"sources":["actions/types.js","configs/constants.js","configs/header-accessors.js","configs/papaparse.config.js","utils/data-format.js","parser/csv.js","utils/csv-required-fields-validator.js","utils/add-id.js","utils/add-duplication-field.js","components/UploadFile/UploadFile.js","components/UploadFile/index.js","actions/dataActions.js","actions/validationActions.js","configs/columns.js","utils/table-cell-validator.js","components/Table/Table.js","components/Table/index.js","components/Warning/Warning.js","components/Warning/index.js","components/App/App.js","components/App/index.js","reportWebVitals.js","reducers/dataReducer.js","reducers/validationReducer.js","reducers/loadingReducer.js","reducers/index.js","store.js","index.js"],"names":["PARSE_FILE","VALID_STRUCTURE","DELETE_DATA","LOADING","DATE_FORMATS","PHONE_FORMATS","LICENSE_NUMBER_FORMATS","WARNING_MESSAGE","INVALID_CELL","PHONE","EMAIL","YEARLY_INCOME","HAS_CHILDREN","LICENSE_STATES","options","header","worker","skipEmptyLines","transformHeader","str","_","camelCase","toLowerCase","comments","transform","value","phoneNumber","trim","some","reg","test","phone","toLower","emailFormatter","length","hasChildFormatter","yearlyIncome","Number","isNaN","String","parseFloat","toFixed","yearlyIncomeFormatter","split","map","state","statesJSON","find","name","abbreviation","undefined","join","licenseStatesFormatter","dynamicTyping","csv","file","Promise","complete","error","Papa","parse","schema","properties","fullName","type","minLength","email","required","csvRequiredFieldValidator","data","resolve","reject","validate","Ajv","compile","every","obj","addId","idx","id","addDuplicationField","arr","targetIdx","findIndex","item","duplicateWith","UploadFile","loading","useSelector","dispatch","useDispatch","Container","fluid","className","fileTypes","multiplyFiles","handleFiles","files","pop","changeIsLoading","Blob","then","requiredFieldValidator","valid","payload","catch","err","console","finally","parseFile","Button","variant","size","columns","Header","accessor","validator","row","isPhoneValid","emailValidator","isEmailValid","age","isInteger","isAgeValid","checkExperience","number","currentAge","experienceNumber","ageNumber","isExperienceValid","income","yearlyIncomeNumber","isYearlyIncomeValid","moment","isValid","diff","isExpirationDateValid","isHasChildrenValid","isLicenseNumberValid","isLicenseStateValid","Table","useTable","getTableProps","headerGroups","rows","prepareRow","bordered","hover","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","i","getRowProps","cells","cell","original","cellProps","getCellProps","hasOwnProperty","Warning","Alert","Heading","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","dataReducer","action","validationReducer","loadingReducer","rootReducer","combineReducers","isLoading","middleware","thunk","store","createStore","applyMiddleware","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0b47f34d.chunk.js","sourcesContent":["export const PARSE_FILE = 'PARSE_FILE';\r\nexport const VALID_STRUCTURE = 'VALID_STRUCTURE';\r\nexport const ADD_FILE_NAME = 'ADD_FILE_NAME';\r\nexport const DELETE_DATA = 'DELETE_DATA';\r\nexport const LOADING = 'LOADING';\r\n","export const MIN_AGE = 21;\r\nexport const MAX_AGE = 150;\r\nexport const MIN_YEARLY_INCOME = 0;\r\nexport const MAX_YEARLY_INCOME = 1000000;\r\nexport const DATE_FORMATS = ['YYYY-MM-DD', 'MM/DD/YYYY'];\r\nexport const PHONE_FORMATS = [/^\\+1\\d{10}$/, /^1\\d{10}$/, /^\\d{10}$/];\r\nexport const LICENSE_NUMBER_FORMATS = [/^[a-zA-Z0-9]{6}$/];\r\nexport const WARNING_MESSAGE = 'File format is not correct';\r\nexport const WARNING_ALERT_VARIANT = 'danger';\r\nexport const INVALID_CELL = 'table-danger';\r\nexport const IMPORT_BUTTON_VARIANT = 'success';\r\n","export const ID = 'id';\r\nexport const FULL_NAME = 'fullName';\r\nexport const PHONE = 'phone';\r\nexport const EMAIL = 'email';\r\nexport const AGE = 'age';\r\nexport const EXPERIENCE = 'experience';\r\nexport const YEARLY_INCOME = 'yearlyIncome';\r\nexport const HAS_CHILDREN = 'hasChildren';\r\nexport const LICENSE_STATES = 'licenseStates';\r\nexport const EXPIRATION_DATE = 'expirationDate';\r\nexport const LICENSE_NUMBER = 'licenseNumber';\r\nexport const DUPLICATE_WITH = 'duplicateWith';\r\n","import _ from 'lodash';\r\nimport {\r\n  PHONE,\r\n  EMAIL,\r\n  HAS_CHILDREN,\r\n  YEARLY_INCOME,\r\n  LICENSE_STATES,\r\n} from './header-accessors';\r\nimport {\r\n  phoneFormatter,\r\n  emailFormatter,\r\n  hasChildFormatter,\r\n  yearlyIncomeFormatter,\r\n  licenseStatesFormatter,\r\n} from '../utils/data-format';\r\n\r\n// TODO: Check prevalidation in tables\r\n// https://stackoverflow.com/questions/56219293/display-boolean-and-timestamp-values-inside-react-table-react-table-reacttyp#answer-58363447\r\nconst dataNormalize = (value, header) => {\r\n  let str = _.trim(value, `'\" `);\r\n\r\n  switch (header) {\r\n    case PHONE:\r\n      return phoneFormatter(str);\r\n    case EMAIL:\r\n      return emailFormatter(str);\r\n    case HAS_CHILDREN:\r\n      return hasChildFormatter(str);\r\n    case YEARLY_INCOME:\r\n      return yearlyIncomeFormatter(str);\r\n    case LICENSE_STATES:\r\n      return licenseStatesFormatter(str);\r\n    default:\r\n      return str;\r\n  }\r\n};\r\n\r\nconst toPascalCase = (str) => _.camelCase(str.toLowerCase());\r\n\r\nconst options = {\r\n  header: true,\r\n  worker: false, // when true there is a problem with next parsing\r\n  skipEmptyLines: true,\r\n  transformHeader: toPascalCase,\r\n  comments: true,\r\n  transform: dataNormalize,\r\n  dynamicTyping: false, // can be a problem with display data\r\n};\r\n\r\nexport default options;\r\n","import _ from 'lodash';\r\nimport phone from 'phone';\r\nimport { PHONE_FORMATS } from '../configs/constants';\r\nimport statesJSON from '../configs/states_titlecase.json';\r\n\r\n// Phone\r\nexport const phoneFormatter = (phoneNumber) => {\r\n  const isValid = PHONE_FORMATS.some((reg) => reg.test(phoneNumber));\r\n  if (isValid) {\r\n    return phone(phoneNumber)[0];\r\n  }\r\n  return phoneNumber;\r\n};\r\n\r\n// Email\r\nexport const emailFormatter = (str) => _.toLower(str);\r\n\r\n// Yearly Income\r\nexport const yearlyIncomeFormatter = (value) => {\r\n  const yearlyIncome = Number(value);\r\n  if (Number.isNaN(yearlyIncome)) {\r\n    return value;\r\n  }\r\n  return String(Number.parseFloat(yearlyIncome).toFixed(2));\r\n};\r\n\r\n// Has children\r\nexport const hasChildFormatter = (value) => {\r\n  if (value.length === 0) {\r\n    return 'false';\r\n  }\r\n  return value;\r\n};\r\n\r\n// License states\r\nexport const licenseStatesFormatter = (value) => {\r\n  const statesArr = value.split(/\\s*\\|\\s*/);\r\n  const statesAbbreviationArr = statesArr.map((str) => {\r\n    const state = statesJSON.find(({ name, abbreviation }) => {\r\n      return (\r\n        name.toLowerCase() === str.toLowerCase() ||\r\n        abbreviation.toLowerCase() === str.toLowerCase()\r\n      );\r\n    });\r\n    if (state !== undefined) {\r\n      return state.abbreviation;\r\n    }\r\n    return str; // If there is no such state in list return original value\r\n  });\r\n  return statesAbbreviationArr.join(' | ');\r\n};\r\n","import Papa from 'papaparse';\r\nimport options from '../configs/papaparse.config';\r\n\r\nconst csv = (file) => {\r\n  return new Promise((complete, error) => {\r\n    Papa.parse(file, { ...options, complete, error });\r\n  });\r\n};\r\n\r\nexport default csv;\r\n","import Ajv from 'ajv';\r\nimport { FULL_NAME, PHONE, EMAIL } from '../configs/header-accessors';\r\nimport { WARNING_MESSAGE } from '../configs/constants';\r\n\r\nconst schema = {\r\n  properties: {\r\n    fullName: { type: 'string', minLength: 1 },\r\n    phone: { type: 'string', minLength: 1 },\r\n    email: { type: 'string', minLength: 1 },\r\n  },\r\n  required: [FULL_NAME, PHONE, EMAIL],\r\n};\r\n\r\nconst csvRequiredFieldValidator = (data) => {\r\n  return new Promise((resolve, reject) => {\r\n    const ajv = new Ajv();\r\n    const validate = ajv.compile(schema);\r\n    const valid = data.every((obj) => validate(obj));\r\n    if (valid) {\r\n      resolve(data);\r\n    }\r\n    reject(WARNING_MESSAGE);\r\n  });\r\n};\r\n\r\nexport default csvRequiredFieldValidator;\r\n","const addId = (data) => {\r\n  return data.map((obj, idx) => ({ id: idx + 1, ...obj }));\r\n};\r\n\r\nexport default addId;\r\n","const addDuplicationField = (arr) => {\r\n  return arr.map((obj) => {\r\n    const { id, phone, email } = obj;\r\n    let targetIdx = arr.findIndex((item) => {\r\n      return (item.phone === phone || item.email === email) && item.id !== id;\r\n    });\r\n    const duplicateWith = targetIdx === -1 ? '' : arr[targetIdx].id;\r\n    return { ...obj, duplicateWith };\r\n  });\r\n};\r\n\r\nexport default addDuplicationField;\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport ReactFileReader from 'react-file-reader';\r\nimport {\r\n  parseFile,\r\n  deleteData,\r\n  changeIsLoading,\r\n} from '../../actions/dataActions';\r\nimport { changeValidity } from '../../actions/validationActions';\r\nimport { Button } from 'react-bootstrap';\r\nimport Container from 'react-bootstrap/Container';\r\nimport { IMPORT_BUTTON_VARIANT } from '../../configs/constants';\r\n\r\nfunction UploadFile() {\r\n  const loading = useSelector((state) => state.loading);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleFiles = (files) => {\r\n    if (!loading) {\r\n      const [file] = files;\r\n      if (file.name.split('.').pop() === 'csv') {\r\n        dispatch(changeIsLoading(true));\r\n        dispatch(parseFile(file));\r\n      } else {\r\n        dispatch(changeValidity(false));\r\n        dispatch(deleteData());\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container fluid=\"md\" className=\"d-flex flex-row-reverse mt-4 mb-4\">\r\n      <ReactFileReader\r\n        fileTypes={['.csv']}\r\n        multiplyFiles={false}\r\n        handleFiles={handleFiles}\r\n      >\r\n        <Button variant={IMPORT_BUTTON_VARIANT} size=\"lg\">\r\n          Import users\r\n        </Button>\r\n      </ReactFileReader>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default UploadFile;\r\n","import UploadFile from './UploadFile';\r\nexport default UploadFile;\r\n","import { PARSE_FILE, VALID_STRUCTURE, DELETE_DATA, LOADING } from './types';\r\nimport { WARNING_MESSAGE } from '../configs/constants';\r\nimport csv from '../parser/csv';\r\nimport requiredFieldValidator from '../utils/csv-required-fields-validator';\r\nimport addId from '../utils/add-id';\r\nimport addDuplicationField from '../utils/add-duplication-field';\r\n\r\n// TODO: convert all boolean to string\r\n// TODO: ask the client about a range of input formats\r\nexport const parseFile = (file) => (dispatch) => {\r\n  if (file instanceof Blob) {\r\n    csv(file)\r\n      .then(({ data }) => requiredFieldValidator(data)) // Validation of required fields - fullName, phone, email\r\n      .then((data) => {\r\n        // if everything ok then data structure is valid\r\n        dispatch({\r\n          type: VALID_STRUCTURE,\r\n          valid: true,\r\n        });\r\n        return data;\r\n      })\r\n      .then(addId) // Add id\r\n      .then(addDuplicationField) // Add duplicate with first found ID\r\n      .then((data) => {\r\n        dispatch({\r\n          type: PARSE_FILE,\r\n          payload: data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.error(err);\r\n        if (err === WARNING_MESSAGE) {\r\n          dispatch({\r\n            type: VALID_STRUCTURE,\r\n            valid: false,\r\n          });\r\n        }\r\n      })\r\n      .finally(() => {\r\n        dispatch({\r\n          type: LOADING,\r\n          loading: false,\r\n        });\r\n      });\r\n  }\r\n};\r\n\r\nexport const deleteData = () => (dispatch) => {\r\n  dispatch({\r\n    type: DELETE_DATA,\r\n  });\r\n};\r\n\r\nexport const changeIsLoading = (loading) => (dispatch) => {\r\n  dispatch({\r\n    type: LOADING,\r\n    loading,\r\n  });\r\n};\r\n","import { VALID_STRUCTURE } from './types';\r\n\r\nexport const changeValidity = (valid) => (dispatch) => {\r\n  dispatch({\r\n    type: VALID_STRUCTURE,\r\n    valid,\r\n  });\r\n};\r\n","const columns = [\r\n  {\r\n    Header: 'ID',\r\n    accessor: 'id',\r\n  },\r\n  {\r\n    Header: 'Full Name',\r\n    accessor: 'fullName',\r\n  },\r\n  {\r\n    Header: 'Phone',\r\n    accessor: 'phone',\r\n  },\r\n  {\r\n    Header: 'Email',\r\n    accessor: 'email',\r\n  },\r\n  {\r\n    Header: 'Age',\r\n    accessor: 'age',\r\n  },\r\n  {\r\n    Header: 'Experience',\r\n    accessor: 'experience',\r\n  },\r\n  {\r\n    Header: 'Yearly Income',\r\n    accessor: 'yearlyIncome',\r\n  },\r\n  {\r\n    Header: 'Has children',\r\n    accessor: 'hasChildren',\r\n  },\r\n  {\r\n    Header: 'License states',\r\n    accessor: 'licenseStates',\r\n  },\r\n  {\r\n    Header: 'Expiration date',\r\n    accessor: 'expirationDate',\r\n  },\r\n  {\r\n    Header: 'License number',\r\n    accessor: 'licenseNumber',\r\n  },\r\n  {\r\n    Header: 'Duplicate with',\r\n    accessor: 'duplicateWith',\r\n  },\r\n];\r\n\r\nexport default columns;\r\n","import {\r\n  AGE,\r\n  EMAIL,\r\n  EXPERIENCE,\r\n  EXPIRATION_DATE,\r\n  HAS_CHILDREN,\r\n  LICENSE_NUMBER,\r\n  LICENSE_STATES,\r\n  PHONE,\r\n  YEARLY_INCOME,\r\n} from '../configs/header-accessors';\r\nimport { validate as emailValidator } from 'email-validator';\r\nimport {\r\n  DATE_FORMATS,\r\n  MAX_AGE,\r\n  MIN_YEARLY_INCOME,\r\n  MAX_YEARLY_INCOME,\r\n  MIN_AGE,\r\n  PHONE_FORMATS,\r\n  LICENSE_NUMBER_FORMATS,\r\n} from '../configs/constants';\r\nimport moment from 'moment';\r\nimport statesJSON from '../configs/states_titlecase.json';\r\n\r\nexport const isFullNameValid = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport const isPhoneValid = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return false;\r\n  }\r\n  return PHONE_FORMATS.some((reg) => reg.test(value));\r\n};\r\n\r\nexport const isEmailValid = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return false;\r\n  }\r\n  return emailValidator(value);\r\n};\r\n\r\n// TODO: Ask the client about max age limit\r\nexport const isAgeValid = (value) => {\r\n  const checkAge = (age) => {\r\n    return (\r\n      Number.isNaN(age) !== true &&\r\n      Number.isInteger(age) &&\r\n      age >= MIN_AGE &&\r\n      age <= MAX_AGE\r\n    );\r\n  };\r\n  const age = Number(value);\r\n  return checkAge(age);\r\n};\r\n\r\n// TODO: Ask a client about type of number (int or float)\r\nexport const isExperienceValid = (value, age) => {\r\n  const checkExperience = (number, currentAge) => {\r\n    return number >= 0 && number <= currentAge - MIN_AGE;\r\n  };\r\n  const experienceNumber = Number(value);\r\n  const ageNumber = Number(age);\r\n  if (Number.isNaN(experienceNumber)) {\r\n    return false;\r\n  }\r\n  if (Number.isNaN(ageNumber) || !Number.isInteger(ageNumber)) {\r\n    return checkExperience(experienceNumber, MIN_AGE);\r\n  }\r\n  return checkExperience(experienceNumber, ageNumber);\r\n};\r\n\r\nexport const isYearlyIncomeValid = (value) => {\r\n  const checkYearlyIncome = (income) => {\r\n    return income >= MIN_YEARLY_INCOME && income <= MAX_YEARLY_INCOME;\r\n  };\r\n  const yearlyIncomeNumber = Number(value);\r\n  if (Number.isNaN(yearlyIncomeNumber)) {\r\n    return false;\r\n  }\r\n  return checkYearlyIncome(yearlyIncomeNumber);\r\n};\r\n\r\nexport const isExpirationDateValid = (value) => {\r\n  const isValidFormat = moment(value, DATE_FORMATS, true).isValid();\r\n  if (isValidFormat) {\r\n    return moment().diff(value) <= 0;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const isHasChildrenValid = (value) => {\r\n  return value === 'true' || value === 'false' || value.length === 0;\r\n};\r\n\r\nexport const isLicenseNumberValid = (value) => {\r\n  return LICENSE_NUMBER_FORMATS.some((reg) => reg.test(value));\r\n};\r\n\r\nexport const isLicenseStateValid = (value) => {\r\n  if (value.length !== 6) {\r\n    return false;\r\n  }\r\n  const currentStates = value.split(/\\s*\\|\\s*/);\r\n  return currentStates.every((str) => {\r\n    return statesJSON.some(({ name, abbreviation }) => {\r\n      return (\r\n        name.toLowerCase() === str.toLowerCase() ||\r\n        abbreviation.toLowerCase() === str.toLowerCase()\r\n      );\r\n    });\r\n  });\r\n};\r\n\r\n// TODO: Add exception for not important columns\r\nconst validator = (value, header, row) => {\r\n  switch (header) {\r\n    case PHONE:\r\n      return isPhoneValid(value);\r\n    case EMAIL:\r\n      return isEmailValid(value);\r\n    case AGE:\r\n      return isAgeValid(value);\r\n    case EXPERIENCE:\r\n      return isExperienceValid(value, row.age);\r\n    case YEARLY_INCOME:\r\n      return isYearlyIncomeValid(value);\r\n    case EXPIRATION_DATE:\r\n      return isExpirationDateValid(value);\r\n    case HAS_CHILDREN:\r\n      return isHasChildrenValid(value);\r\n    case LICENSE_NUMBER:\r\n      return isLicenseNumberValid(value);\r\n    case LICENSE_STATES:\r\n      return isLicenseStateValid(value);\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\nexport default validator;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTable } from 'react-table';\r\nimport { INVALID_CELL } from '../../configs/constants';\r\nimport BTable from 'react-bootstrap/Table';\r\nimport columns from '../../configs/columns';\r\nimport validator from '../../utils/table-cell-validator';\r\n\r\nfunction Table() {\r\n  // TODO: useMemo to not recalculate on every single render\r\n\r\n  const data = useSelector((state) => state.data);\r\n\r\n  // Use the state and functions returned from useTable to build your UI\r\n  const { getTableProps, headerGroups, rows, prepareRow } = useTable({\r\n    columns,\r\n    data,\r\n  });\r\n\r\n  return (\r\n    <BTable bordered hover {...getTableProps()}>\r\n      <thead className=\"thead-dark\">\r\n        {headerGroups.map((headerGroup) => (\r\n          <tr {...headerGroup.getHeaderGroupProps()}>\r\n            {headerGroup.headers.map((column) => (\r\n              <th {...column.getHeaderProps()}>{column.render('Header')}</th>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </thead>\r\n      <tbody>\r\n        {rows.map((row, i) => {\r\n          prepareRow(row);\r\n          return (\r\n            <tr {...row.getRowProps()}>\r\n              {row.cells.map((cell) => {\r\n                const { id: header } = cell.column;\r\n                const { value } = cell;\r\n                let isValid = validator(value, header, cell.row.original);\r\n\r\n                // TODO: find more safer way to add class\r\n                // Add class if data is invalid\r\n                const cellProps = { ...cell.getCellProps() };\r\n                if (!isValid) {\r\n                  if (cellProps.hasOwnProperty('className')) {\r\n                    cellProps.className = `${cellProps.className} ${INVALID_CELL}`;\r\n                  } else {\r\n                    cellProps.className = INVALID_CELL;\r\n                  }\r\n                }\r\n                return <td {...cellProps}>{cell.render('Cell')}</td>;\r\n              })}\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </BTable>\r\n  );\r\n}\r\n\r\nexport default Table;\r\n","import Table from './Table';\r\nexport default Table;\r\n","import React from 'react';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Container from 'react-bootstrap/Container';\r\nimport {\r\n  WARNING_MESSAGE,\r\n  WARNING_ALERT_VARIANT,\r\n} from '../../configs/constants';\r\n\r\nfunction Warning() {\r\n  return (\r\n    <Container fluid=\"md\">\r\n      <Alert variant={WARNING_ALERT_VARIANT} className=\"mt-4 mb-4\">\r\n        <Alert.Heading className=\"text-center mt-4 mb-4\">\r\n          {WARNING_MESSAGE || 'Oops, something went wrong'}\r\n        </Alert.Heading>\r\n      </Alert>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Warning;\r\n","import Warning from './Warning';\r\nexport default Warning;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport UploadFile from '../UploadFile';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Table from '../Table';\r\nimport Warning from '../Warning';\r\nimport Container from 'react-bootstrap/Container';\r\n\r\nfunction App() {\r\n  const valid = useSelector((state) => state.valid);\r\n  return (\r\n    <Container fluid>\r\n      <UploadFile />\r\n      {valid ? <Table /> : <Warning />}\r\n      {valid && <UploadFile />}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import App from './App';\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { PARSE_FILE, DELETE_DATA } from '../actions/types';\r\n\r\nconst initialState = [];\r\n\r\nconst dataReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case PARSE_FILE:\r\n      return [...action.payload];\r\n    case DELETE_DATA:\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default dataReducer;\r\n","import { VALID_STRUCTURE } from '../actions/types';\r\n\r\nconst initialState = false;\r\n\r\nconst validationReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case VALID_STRUCTURE:\r\n      return action.valid;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default validationReducer;\r\n","import { LOADING } from '../actions/types';\r\n\r\nconst initialState = false;\r\n\r\nconst loadingReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOADING:\r\n      return action.loading;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default loadingReducer;\r\n","import { combineReducers } from 'redux';\r\nimport dataReducer from './dataReducer';\r\nimport validationReducer from './validationReducer';\r\nimport loadingReducer from './loadingReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  data: dataReducer,\r\n  valid: validationReducer,\r\n  isLoading: loadingReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  applyMiddleware(...middleware)\r\n);\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}